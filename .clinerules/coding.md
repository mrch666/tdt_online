# Правила кодирования для проекта FastAPI

## Общие правила
1. **Структура базы данных неизменна** - нельзя изменять таблицы, поля или типы данных
2. **Имена таблиц и полей в нижнем регистре** - все обращения к БД должны использовать `quote=True` и `name='<имя_в_нижнем_регистре>'`
3. **Модели SQLAlchemy** - файл `models.py` можно только дополнять связями таблиц, но не изменять структуру

## Обращение к базе данных
```python
# Правильно:
__tablename__ = 'modelgoods'
__table_args__ = ({'quote': True})

# Правильно:
Column('id', String(12), quote=True, name='id')

# Неправильно:
__tablename__ = 'ModelGoods'  # должно быть в нижнем регистре
```

## Хранимые процедуры
1. **wp_SaveBlobToFile** - параметры:
   - `iPathDB` char(400) - путь к папке изображений
   - `iPath` char(100) - только имя файла
   - `iBlob` blob - содержимое файла

2. **Вызов процедур** - всегда использовать точные имена и типы параметров

## Типы данных
- `modelid`: CHAR(12) - всегда ровно 12 символов
- Пути: использовать оригинальные системные пути
- BLOB: для передачи бинарных данных

## Логирование
- Добавлять логирование длины параметров при отладке
- Логировать ошибки с деталями параметров
- Использовать logger.getLogger("api") для единообразия